<div class="container mt-3">
  <h1>Solicita unirte al grupo: <%= Group.find(params[:group_id]).name %> </h1>

  <%# code from https://stackoverflow.com/a/52470594 %>
  <% flash.each do |name, messages| %>
    <div class="alert alert-<%= name %>">
      <ul>
      <% if messages.is_a?(Array) %>
        <% messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with(model: @request, local: true,  url: '/request/') do |f| %>
      <%= f.hidden_field :group_id, value: params[:group_id] %>
      <%= f.hidden_field :user_id, value: current_user.id %>
      <%= f.hidden_field :status, value: "pending" %>
      <%# STATUS: 3 status = 1. pending, 2.accept, 3.rejected %>

      <div class="field">
          <%= f.label :description, "Detalla porque desearías unirte al grupo" %><br />
          <%= f.text_field :description %><br />
          <i>Por ejemplo: "Me gustaría unirme a este grupo porque me interesa la temática y me gustaría conocer a más personas con intereses similares"</i>
      </div>

      <div class="actions">
        <%= f.submit "Enviar Solicitud" %>
      </div>
      
  <% end %>
</div>


